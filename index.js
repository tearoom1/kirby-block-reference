(function(){"use strict";function a(t,e,i,n,c,l,d,_){var s=typeof t=="function"?t.options:t;return e&&(s.render=e,s.staticRenderFns=i,s._compiled=!0),{exports:t,options:s}}const r={extends:"k-select-field",updated(){this.fillBlocks()},mounted(){this.fillBlocks()},methods:{async fillBlocks(){let t=this.$parent.$parent.$el.querySelector('select[name="targetpage"]').value;t!==""&&await this.$api.get("blocks?page="+t).then(e=>{let i=[];for(let n=0;n<e.length;n++){let c=e[n].content,l=Object.values(c).join(" | ").substring(0,33);i.push({text:n+": "+e[n].type+" | "+l,value:e[n].id})}this.$withoutWatchers(()=>{this.options=i,this.$forceUpdate()})})},$withoutWatchers(t){if(!this._watcher)return t();const e={cb:this._watcher.cb,sync:this._watcher.sync};this._watcher=Object.assign(this._watcher,{cb:()=>null,sync:!0}),t(),this._watcher=Object.assign(this._watcher,e)}}};var o=function(){var e=this,i=e._self._c;return i("k-field",e._b({staticClass:"k-select-field",attrs:{input:e._uid}},"k-field",e.$props,!1),[i("k-input",e._g(e._b({ref:"input",attrs:{id:e._uid,theme:"field",type:"select"}},"k-input",e.$props,!1),e.$listeners))],1)},h=[],f=a(r,o,h);const u=f.exports;panel.plugin("tearoom1/block-reference",{fields:{blockReference:u}})})();
