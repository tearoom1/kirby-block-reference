(function(){"use strict";function l(t,e,n,i,c,a,d,_){var s=typeof t=="function"?t.options:t;return e&&(s.render=e,s.staticRenderFns=n,s._compiled=!0),{exports:t,options:s}}const r={extends:"k-select-field",updated(){this.fillBlocks()},mounted(){this.fillBlocks()},methods:{async fillBlocks(){let t=this.$parent.$parent.$el.querySelector('select[name="targetpage"]').value;t!==""&&await this.$api.get("blocks?page="+t).then(e=>{let n=[];for(let i=0;i<e.length;i++){let c=e[i].content,a=Object.values(c).join(" ~ ").substring(0,33);n.push({text:i+": "+e[i].parent+" | "+e[i].type+" | "+a,value:e[i].id})}this.$withoutWatchers(()=>{this.options=n,this.$forceUpdate()})})},$withoutWatchers(t){if(!this._watcher)return t();const e={cb:this._watcher.cb,sync:this._watcher.sync};this._watcher=Object.assign(this._watcher,{cb:()=>null,sync:!0}),t(),this._watcher=Object.assign(this._watcher,e)}}};var o=function(){var e=this,n=e._self._c;return n("k-field",e._b({staticClass:"k-select-field",attrs:{input:e._uid}},"k-field",e.$props,!1),[n("k-input",e._g(e._b({ref:"input",attrs:{id:e._uid,theme:"field",type:"select"}},"k-input",e.$props,!1),e.$listeners))],1)},h=[],f=l(r,o,h);const u=f.exports;panel.plugin("tearoom1/block-reference",{fields:{blockReference:u}})})();
